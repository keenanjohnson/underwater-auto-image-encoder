# Example configuration for setup_and_train.py
# Copy this file to setup_and_train_config.yaml and customize as needed

# Dataset Download Configuration
download:
  repo_id: "Seattle-Aquarium/Seattle_Aquarium_benthic_imagery"
  dataset_dir: "dataset_raw"  # Directory to download/store raw dataset
  hf_token: null  # HuggingFace token (null to use env var or CLI login)

# Dataset Preparation Configuration
preparation:
  working_dir: "training_dataset"  # Working directory for prepared dataset
  sets: null  # Specific sets to process (null = all sets). Example: ["set01", "set02"]
  symlink: false  # Use symlinks instead of copying (saves disk space)
  split_ratio: 0.8  # Train/validation split ratio (0.0-1.0)

# Cropping Configuration
cropping:
  input:
    width: 4606  # Crop width for input images (must match input dimensions)
    height: 4030  # Crop height for input images (must match input dimensions)
  output:
    enabled: false  # Skip output cropping (HuggingFace outputs are already consistent)
    width: 4606  # Only used if enabled
    height: 4030  # Only used if enabled

# Training Configuration
training:
  image_size: 1024  # Training image size (patches). Try 512 for less memory
  batch_size: 8  # Training batch size. Reduce if OOM errors occur
  epochs: 50  # Number of training epochs
  learning_rate: 0.0001  # Learning rate (1e-4)
  output_dir: "output"  # Output directory for trained models
  checkpoint_dir: "checkpoints"  # Checkpoint directory
  resume: null  # Resume from checkpoint (e.g., "checkpoints/checkpoint_epoch_10.pth")

# Step Control (skip completed steps for idempotent re-runs)
steps:
  skip_download: false  # Skip if dataset already downloaded
  skip_prepare: false  # Skip if already prepared
  skip_crop: false  # Skip if already cropped
  prepare_only: false  # Only download/prepare/crop, don't train

# Common Configurations for Different Scenarios:
#
# 1. Quick test run (small subset):
#    preparation.sets: ["set01"]
#    training.batch_size: 4
#    training.epochs: 10
#
# 2. Memory-constrained environment:
#    training.image_size: 512
#    training.batch_size: 2
#
# 3. High-performance GPU:
#    training.image_size: 1024
#    training.batch_size: 16
#
# 4. Resume interrupted training:
#    steps.skip_download: true
#    steps.skip_prepare: true
#    steps.skip_crop: true
#    training.resume: "checkpoints/checkpoint_epoch_25.pth"
#
# 5. Save disk space:
#    preparation.symlink: true
